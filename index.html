<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio de Sesión</title>
    <link rel="stylesheet" href="style/style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="login-container">
        <div class="login-box" id="login-form">
            <h2>Iniciar Sesión</h2>
            <form action="login/login-process.php" method="post">
              <div class="input-group">
                <label for="username">Usuario</label>
                <input type="text" id="username" name="username" required>
            </div>
            <div class="input-group">
                <label for="password">Contraseña</label>
                <input type="password" id="password" name="password" required>
            </div>
            <button type="submit" class="login-button">Entrar</button>
                <div class="options">
                    <a href="#" id="forgot-password-link">¿Olvidaste tu contraseña?</a>
                    <a href="#" id="signup-link">Registrarse</a>
                </div>
            </form>
        </div>

        <div class="login-box" id="signup-form" style="display: none;">
            <h2>Registrarse</h2>
            <form action="login/sign-up.php" method="post">
                <div class="input-group">
                    <label for="new-username">Usuario</label>
                    <input type="text" id="username" name="username" required>
                </div>
                <div class="input-group">
                    <label for="new-email">Correo Electrónico</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="input-group">
                    <label for="new-password">Contraseña</label>
                    <input type="password" id="password" name="password" required>
                </div>
                <button type="submit" class="login-button">Registrarse</button>
                <div class="options">
                    <a href="#" id="login-link-from-signup">Iniciar Sesión</a>
                </div>
            </form>
        </div>

        <div class="login-box" id="forgot-password-form" style="display: none;">
            <h2>Recuperar Contraseña</h2>
            <form action="#" method="post">
                <div class="input-group">
                    <label for="email-recover">Correo Electrónico</label>
                    <input type="email" id="email-recover" name="email-recover" required>
                </div>
                <button type="submit" class="login-button">Enviar enlace de recuperación</button>
                <div class="options">
                    <a href="#" id="login-link-from-forgot">Iniciar Sesión</a>
                </div>
            </form>
        </div>
    </div>

    <script>

    //alertas del login
      const urlParams = new URLSearchParams(window.location.search);
      const mensaje = urlParams.get('mensaje');

      if (mensaje === 'exito') {
        Swal.fire({
          title: 'Registro exitoso',
          icon: 'success', // 'warning', 'error', 'info', 'question', 'sucess'
          timer: 3000, // Cerrar automáticamente después de 3 segundos (en milisegundos)
          timerProgressBar: true, // Mostrar una barra de progreso del tiempo
          confirmButtonText: 'Aceptar'
        });
        // Limpia el parámetro de la URL para que no se muestre la alerta al recargar
        window.history.replaceState({}, document.title, window.location.pathname);
      } else if (mensaje === 'error') {
        Swal.fire({
          title: 'Error',
          text: 'Hubo un error al realizar el registro.',
          icon: 'error', // 'warning', 'error', 'info', 'question', 'sucess'
          timer: 3000,
          timerProgressBar: true,
          confirmButtonText: 'Aceptar'
        });
        window.history.replaceState({}, document.title, window.location.pathname);
      }
      if (mensaje === 'logout') {
        //alerta con sweet aler 2
        Swal.fire({
          title: 'Sesión cerrada!',
          icon: 'info', // 'warning', 'error', 'info', 'question'
          timer: 3000,
          timerProgressBar: true,
          confirmButtonText: 'Aceptar'
        });
        // Limpia el parámetro de la URL para que no se muestre la alerta al recargar
        window.history.replaceState({}, document.title, window.location.pathname);
      }

    const loginForm = document.getElementById('login-form');
    const signupForm = document.getElementById('signup-form');
    const forgotPasswordForm = document.getElementById('forgot-password-form');

    const signupLink = document.getElementById('signup-link');
    const forgotPasswordLink = document.getElementById('forgot-password-link');
    const loginLinkFromSignup = document.getElementById('login-link-from-signup');
    const loginLinkFromForgot = document.getElementById('login-link-from-forgot');

    signupLink.addEventListener('click', (e) => {
        e.preventDefault(); // Evita que el enlace recargue la página
        loginForm.style.display = 'none';
        signupForm.style.display = 'block';
        forgotPasswordForm.style.display = 'none';
    });

    forgotPasswordLink.addEventListener('click', (e) => {
        e.preventDefault();
        loginForm.style.display = 'none';
        signupForm.style.display = 'none';
        forgotPasswordForm.style.display = 'block';
    });

    loginLinkFromSignup.addEventListener('click', (e) => {
        e.preventDefault();
        loginForm.style.display = 'block';
        signupForm.style.display = 'none';
        forgotPasswordForm.style.display = 'none';
    });

    loginLinkFromForgot.addEventListener('click', (e) => {
        e.preventDefault();
        loginForm.style.display = 'block';
        signupForm.style.display = 'none';
        forgotPasswordForm.style.display = 'none';
    });
 </script>
</body>
</html>